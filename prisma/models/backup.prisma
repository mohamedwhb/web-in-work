model BackupSettings {
  id               String          @id @default(uuid())
  automaticBackups Boolean         @default(true) @map("automatic_backups")
  frequency        Frequency       @default(daily)
  retention        Int             @default(30)
  includedData     Json            @map("included_data")
  storageLocation  StorageLocation @default(cloud)
  cloudProvider    String?         @map("cloud_provider")
  lastBackup       DateTime?       @map("last_backup")
  nextBackup       DateTime?       @map("next_backup")
  createdAt        DateTime        @default(now()) @map("created_at")
  updatedAt        DateTime        @updatedAt @map("updated_at")
  Backup           Backup[]

  @@index([automaticBackups, frequency], map: "idx_backup_settings")
}

model Backup {
  id         String          @id
  name       String
  type       BackupType
  status     BackupStatus    @default(completed)
  location   StorageLocation
  size       String
  settingsId String?         @map("settings_id")
  createdAt  DateTime        @default(now()) @map("created_at")
  updatedAt  DateTime        @updatedAt @map("updated_at")
  settings   BackupSettings? @relation(fields: [settingsId], references: [id])
}

enum BackupType {
  manual
  automatic
}

enum BackupStatus {
  completed
  in_progress
  failed
}

enum StorageLocation {
  local
  cloud
}

enum Frequency {
  daily
  weekly
  monthly
}
